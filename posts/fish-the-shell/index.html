<!DOCTYPE html>
<html lang=" en-US">

<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta charset="utf-8">

  <title>
    
    
    
    üê† Fish, the shell -
    
    
    Lucas Arantes
  </title>

  <meta name="description" content="Blog about Ruby, Elixir, command line, text editors, developer productivity, personal projects, etc.">
  <meta name="keywords" content="Blog about Ruby, Elixir, command line, text editors, developer productivity, personal projects, etc.">

  <meta content="Lucas Arantes" property="og:site_name">

  <meta content="üê† Fish, the shell" property="og:title">


  <meta content="article" property="og:type">


  <meta content="Blog about Ruby, Elixir, command line, text editors, developer productivity, personal projects, etc." property="og:description">


  <meta content="https://lucasprag.com/posts/fish-the-shell/" property="og:url">


  <meta content="2020-06-22T00:00:00+00:00" property="article:published_time">
  <meta content="https://lucasprag.com/about/" property="article:author">


  <meta content="https://lucasprag.com/assets/images/computer.png" property="og:image">


  


  
  <meta content="terminal" property="article:tag">
  


  <link rel="canonical" href="https://lucasprag.com/posts/fish-the-shell/">
  <link rel="icon" type="image/x-icon" href="https://lucasprag.com/assets/images/favicon.ico">
  <link rel="stylesheet" href="https://lucasprag.com/assets/css/main.css">
  <link rel="alternate" type="application/rss+xml" href="https://lucasprag.com/feed.xml" title="RSS 2.0" />
  <link rel="sitemap" href="https://lucasprag.com/sitemap.xml" type="application/xml" />
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WTKH1J2E5Z"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WTKH1J2E5Z');
</script>
</head>

<body class="bg-gray-200 dark:bg-gray-950">
  <div class="container mx-auto max-w-4xl flex flex-col min-h-screen px-4">
    <nav class="pt-2 sm:my-5">
  <div class="relative flex h-16 items-center justify-between">
    <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
      <!-- Mobile menu button-->
      <button type="button"
        class="relative inline-flex items-center justify-center rounded-md p-2 text-gray-500 hover:bg-gray-500 dark:text-gray-200 dark:hover:bg-gray-950 hover:text-white focus:ring-2 focus:ring-white focus:outline-hidden focus:ring-inset"
        aria-controls="mobile-menu" aria-expanded="false">
        <span class="absolute -inset-0.5"></span>
        <span class="sr-only">Open main menu</span>
        <!--
            Icon when menu is closed.

            Menu open: "hidden", Menu closed: "block"
          -->
        <svg class="block size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          aria-hidden="true" data-slot="icon">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
        </svg>
        <!--
            Icon when menu is open.

            Menu open: "block", Menu closed: "hidden"
          -->
        <svg class="hidden size-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          aria-hidden="true" data-slot="icon">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
      <div class="flex shrink-0 items-center">
        <a href="/" class="px-4 py-3 rounded">
          <p class="font-medium text-xl">
            <img src="/assets/images/computer.png" height="15" width="15" alt="lucasprag emoji" class="inline mb-1" />
            <span class="ml-2 hover:underline hover:underline-offset-4">lucasprag</span>
          </p>
        </a>

      </div>
      <div class="hidden sm:ml-6 sm:block">
        <div class="flex space-x-4">
          <!-- Current: "bg-gray-900 text-white", Default: "text-gray-300 hover:bg-gray-700 hover:text-white" -->
          <a href="/" class="btn-nav mt-3" aria-current="">Home</a>
          <a href="/projects" class="btn-nav mt-3" aria-current="">Projects</a>
        </div>
      </div>
    </div>

    <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
      <button
        class="p-3 ml-1 text-gray-500 dark:text-white hover:bg-gray-500 dark:hover:bg-gray-800 hover:text-white rounded-md cursor-pointer mr-5"
        id="theme-toggle" aria-label="Switch between dark mode and light mode">
        <!-- Dark Icon  -->
        <svg class="align-middle block dark:hidden" height="23" width="23" alt="click to enable dark mode"
          xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" width="1em"
          height="1em" viewBox="0 0 36 36">
          <path fill="currentColor"
            d="M16 2s0-2 2-2s2 2 2 2v2s0 2-2 2s-2-2-2-2V2zm18 14s2 0 2 2s-2 2-2 2h-2s-2 0-2-2s2-2 2-2h2zM4 16s2 0 2 2s-2 2-2 2H2s-2 0-2-2s2-2 2-2h2zm5.121-8.707s1.414 1.414 0 2.828s-2.828 0-2.828 0L4.878 8.708s-1.414-1.414 0-2.829c1.415-1.414 2.829 0 2.829 0l1.414 1.414zm21 21s1.414 1.414 0 2.828s-2.828 0-2.828 0l-1.414-1.414s-1.414-1.414 0-2.828s2.828 0 2.828 0l1.414 1.414zm-.413-18.172s-1.414 1.414-2.828 0s0-2.828 0-2.828l1.414-1.414s1.414-1.414 2.828 0s0 2.828 0 2.828l-1.414 1.414zm-21 21s-1.414 1.414-2.828 0s0-2.828 0-2.828l1.414-1.414s1.414-1.414 2.828 0s0 2.828 0 2.828l-1.414 1.414zM16 32s0-2 2-2s2 2 2 2v2s0 2-2 2s-2-2-2-2v-2z" />
          <circle fill="currentColor" cx="18" cy="18" r="10" />
          <rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)" />
        </svg>

        <!-- Light Icon -->
        <svg class="align-middle hidden dark:block" height="23" width="23" alt="click to enable light mode"
          xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" focusable="false" width="1em"
          height="1em" viewBox="0 0 36 36">
          <path fill="currentColor"
            d="M30.312.776C32 19 20 32 .776 30.312c8.199 7.717 21.091 7.588 29.107-.429C37.9 21.867 38.03 8.975 30.312.776z" />
          <path
            d="M30.705 15.915a1.163 1.163 0 1 0 1.643 1.641a1.163 1.163 0 0 0-1.643-1.641zm-16.022 14.38a1.74 1.74 0 0 0 0 2.465a1.742 1.742 0 1 0 0-2.465zm13.968-2.147a2.904 2.904 0 0 1-4.108 0a2.902 2.902 0 0 1 0-4.107a2.902 2.902 0 0 1 4.108 0a2.902 2.902 0 0 1 0 4.107z"
            fill="currentColorr" />
          <rect x="0" y="0" width="36" height="36" fill="rgba(0, 0, 0, 0)" />
        </svg>
      </button>
    </div>
  </div>

  <!-- Mobile menu, show/hide based on menu state. -->
  <div class="hidden sm:hidden bg-gray-300 dark:bg-gray-900 rounded" id="mobile-menu">
    <div class="space-y-1 px-2 py-2">
      <a href="/" class="block btn-nav" aria-current="">Home</a>
      <a href="/projects" class="block btn-nav" aria-current="">Projects</a>
    </div>
  </div>
</nav>

    <main class="flex-1">
      <h1 class="font-semibold text-3xl mt-5">
  üê† Fish, the shell
</h1>

<div>
  <time class="font-medium text-sm py-3">
    
    Published: June 22, 2020
    
  </time>

  <div class="text-xs ml-4 mt-1 inline">
    
    <span class="tag mr-1">terminal</span>
    
  </div>
</div>

<div class="post-content prose mt-5">
  <p>One of the greatest changes I‚Äôve made to my set of programming tools was changing from zsh to <a href="https://fishshell.com/">fish</a> and these are the reasons that drove me to this change:</p>

<h3 id="1-abbreviations">1. Abbreviations</h3>

<p>Abbreviations behave like aliases on bash and zsh but instead of only running their respective commands, they also expand and show the full command.</p>

<p>This is useful to let others know what you are doing when pair programming, to give some sense to your history of commands and to not let you forget how to use other shells when you‚Äôre using other people‚Äôs computers. This last one is special to me because I used to have lots of aliases on zsh, but when I had to help a colleague, I‚Äôd be lost because I wouldn‚Äôt remember what <code class="language-plaintext highlighter-rouge">gcam</code> or <code class="language-plaintext highlighter-rouge">dcup</code> were exactly.</p>

<p>Example:</p>

<p>It may look that I‚Äôm typing super fast in the gif above ‚Äì because of its frames per second rate ‚Äì but I‚Äôm only typing <code class="language-plaintext highlighter-rouge">fn</code>, <code class="language-plaintext highlighter-rouge">gs</code>, <code class="language-plaintext highlighter-rouge">gd</code>, <code class="language-plaintext highlighter-rouge">ga .</code>, <code class="language-plaintext highlighter-rouge">gc</code>, <code class="language-plaintext highlighter-rouge">gp</code>.</p>

<p><img src="/assets/images/posts/fish-abbreviations.gif" alt="Using fish abbreviations, commands expand as I type the abbreviations to let other know what you are doing and keep you give sense to your history." /></p>

<p>Fish also have aliases, but I just don‚Äôt use them that much in favor of abbreviations.</p>

<h3 id="2-syntax-highlight">2. Syntax highlight</h3>

<p>When typing commands to your shell, you get syntax highlighting that shows when a program exists, if you made a typo and many more things.</p>

<p>Showing command as red when the program doesn‚Äôt exists</p>

<p><img src="/assets/images/posts/fish-doesnt-exist.png" alt="program doesn't exists" /></p>

<p>Showing darker blue for the program and lighter blue for its arguments</p>

<p><img src="/assets/images/posts/fish-syntax-highlight.png" alt="darker blue for program and lighter blue for its arguments" /></p>

<h3 id="3-oh-my-fish">3. Oh my fish</h3>

<p><a href="https://github.com/oh-my-fish/oh-my-fish">Oh my fish</a> is a fast, extensible and easy to use framework that let you write functions that work as bin programs.</p>

<p>You may have noticed that I typed <code class="language-plaintext highlighter-rouge">gp</code> in the gif above and it expanded to <code class="language-plaintext highlighter-rouge">git pull origin (current_branch)</code></p>

<p><code class="language-plaintext highlighter-rouge">current_branch</code> is a function I copied from somewhere ‚Äì I can‚Äôt remember ‚Äì but all it does is to return the name of the branch you are currently using.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ~/.config/fish/functions/current_branch.fish

function current_branch
    set ref (git symbolic-ref HEAD 2&gt; /dev/null); or \
    set ref (git rev-parse --short HEAD 2&gt; /dev/null); or return
    echo $ref | sed -e 's|^refs/heads/||'
end
</code></pre></div></div>

<p>I also have <code class="language-plaintext highlighter-rouge">gP</code> that expands to <code class="language-plaintext highlighter-rouge">git push origin (current_branch)</code>.</p>

<p>Another function I have is <code class="language-plaintext highlighter-rouge">kp</code> to interactively kill processes using <a href="https://github.com/junegunn/fzf">fzf</a>, a fast command line fuzzy finder.</p>

<p><img src="/assets/images/posts/fish-kp.gif" alt="using kp to kill a sleep program running forever" /></p>

<p>Oh my fish also brings to the table a number of <a href="https://github.com/oh-my-fish/oh-my-fish/blob/master/docs/Themes.md">themes</a> for your shell with special formating to show branch names, current directories, if there is any git change, etc.</p>

<p><img src="/assets/images/posts/fish-oh-my-fish-shell.png" alt="my custom fish theme is quite simple" /></p>

<h3 id="4-autocomplete">4. Autocomplete</h3>

<p>The default autocomplete behaviour in fish is adding a gray auto completion option as you type commands, then you can use your right arrow key and it autocompletes.</p>

<p><img src="/assets/images/posts/fish-autocomplete.png" alt="default auto complete" /></p>

<p>But if you, like me, miss the <code class="language-plaintext highlighter-rouge">ctrl+r</code> history search from bash and zsh, you can add it to fish.</p>

<p><img src="/assets/images/posts/fish-querying-history.png" alt="fzf auto complete" /></p>

<p>The way to add it is by adding a symbolic link and an existing function that comes by default when you install fzf to your fish config, assuming you use fzf.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ln -s ~/.fzf/shell/key-bindings.fish ~/.config/fish/functions/fzf_key_bindings.fish

# ~/.cofig/fish/functions/fish_user_key_bindings.fish
function fish_user_key_bindings
  fzf_key_bindings
end
</code></pre></div></div>

<p>I really like having both autocomplete benefits. üòé</p>

<h3 id="reason-why-not-use-it">Reason why <em>not</em> use it</h3>

<p>Fish is intentionally not fully POSIX compliant meaning that a script written for bash will likely not work on fish.</p>

<p>As a result, in order to run a bash script you need to explicitly run it on bash, for example <code class="language-plaintext highlighter-rouge">bash script.sh</code>.</p>

<p>This is not a big deal for me compared with the benefits I listed above, but I understand that it can be quite annoying.</p>

</div>

    </main>

    <footer class="mt-8">
  <div class="flex justify-center">
    <a href="https://github.com/lucasprag" aria-label="Visit my Github profile"
      class="px-4 pb-3 pt-4 ml-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded" target="_blank">
      <!-- Github Icon -->
      <svg class="align-middle" height="25" width="25" alt="my github profile" xmlns="http://www.w3.org/2000/svg"
        focusable="false" width="25" height="25" viewBox="0 0 25 25" fill="currentColor">
        <path
          d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
      </svg>
    </a>

    <a href="/feed.xml" class="px-4 pb-3 pt-4 ml-1 hover:bg-gray-100 dark:hover:bg-gray-800 rounded"
      aria-label="Link to feed RSS" target="_blank">
      <!-- RSS Icon -->
      <svg class="align-middle" height="25" width="25" alt="my RSS feed" xmlns="http://www.w3.org/2000/svg"
        focusable="false" viewBox="0 0 448 512">
        <path fill="currentColor"
          d="M64 32C28.7 32 0 60.7 0 96V416c0 35.3 28.7 64 64 64H384c35.3 0 64-28.7 64-64V96c0-35.3-28.7-64-64-64H64zM96 136c0-13.3 10.7-24 24-24c137 0 248 111 248 248c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-110.5-89.5-200-200-200c-13.3 0-24-10.7-24-24zm0 96c0-13.3 10.7-24 24-24c83.9 0 152 68.1 152 152c0 13.3-10.7 24-24 24s-24-10.7-24-24c0-57.4-46.6-104-104-104c-13.3 0-24-10.7-24-24zm64 120c0 17.7-14.3 32-32 32s-32-14.3-32-32s14.3-32 32-32s32 14.3 32 32z" />
      </svg>
    </a>
  </div>

  <div class="my-4 text-gray-500 text-xs flex justify-center">
    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
      <img alt="Creative Commons License" src="/assets/images/creativecommons-88x31.png" width="88" height="31" />
    </a>
  </div>
</footer>
  </div>

  <script src="https://lucasprag.com/assets/js/main.js"></script>

  <!-- 100% privacy-first analytics -->
  <script async defer src="https://scripts.simpleanalyticscdn.com/latest.js"></script>
  <noscript><img src="https://queue.simpleanalyticscdn.com/noscript.gif" alt=""
      referrerpolicy="no-referrer-when-downgrade" /></noscript>
</body>

</html>